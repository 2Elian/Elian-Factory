(()=>{"use strict";var a={6956:(a,e,t)=>{t(3792),t(3362),t(9085),t(9391);var r=t(5130),o=t(6768),n={class:"container-fluid"},l={class:"row"},i={class:"col-md-10 main-content"};function s(a,e,t,s,c,d){var u=(0,o.g2)("SideBar");return(0,o.uX)(),(0,o.CE)("div",n,[(0,o.Lk)("div",l,[(0,o.bF)(u,{activePage:c.activePage,onChangePage:d.changePage},null,8,["activePage","onChangePage"]),(0,o.Lk)("div",i,[(0,o.bF)(r.eB,{name:"fade",mode:"out-in"},{default:(0,o.k6)((function(){return[((0,o.uX)(),(0,o.Wv)((0,o.$y)(d.currentComponent)))]})),_:1})])])])}var c=t(4232),d={class:"col-md-2 sidebar"},u={class:"d-flex flex-column p-3 h-100"},m={class:"nav nav-pills flex-column mb-auto"},p=["onClick"];function f(a,e,t,n,l,i){return(0,o.uX)(),(0,o.CE)("div",d,[(0,o.Lk)("div",u,[e[0]||(e[0]=(0,o.Fv)('<div class="text-center mb-4" data-v-2883bdb1><h3 class="text-white" data-v-2883bdb1>🐤ElianFactory</h3><h5 class="text-white" data-v-2883bdb1>Windows的LLM训练平台</h5><p class="text-light" data-v-2883bdb1>版本: V1.0</p></div><hr class="text-white opacity-25" data-v-2883bdb1>',2)),(0,o.Lk)("ul",m,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.menuItems,(function(a,e){return(0,o.uX)(),(0,o.CE)("li",{class:"nav-item",key:e},[(0,o.Lk)("a",{href:"#",class:(0,c.C4)(["nav-link",t.activePage===e?"active":"text-white"]),onClick:(0,r.D$)((function(a){return i.changePage(e)}),["prevent"])},[(0,o.Lk)("i",{class:(0,c.C4)(["bi",a.icon,"me-2"])},null,2),(0,o.eW)((0,c.v_)(a.title),1)],10,p)])})),128))]),e[1]||(e[1]=(0,o.Lk)("hr",{class:"text-white opacity-25"},null,-1)),e[2]||(e[2]=(0,o.Lk)("div",{class:"text-center text-white small"},[(0,o.Lk)("p",null,"基于Transformers开发"),(0,o.Lk)("p",null,[(0,o.eW)("作者：Elian | "),(0,o.Lk)("a",{href:"https://github.com/ElianFoundation",target:"_blank",class:"text-white"},[(0,o.eW)("点亮本项目的stars"),(0,o.Lk)("i",{class:"bi bi-github ms-1"})])]),(0,o.Lk)("p",null,"© 2025 Elian All Rights Reserved")],-1))])])}const v={name:"SideBar",props:{activePage:{type:String,required:!0}},data:function(){return{menuItems:{training:{title:"模型训练",icon:"bi-cpu"},inference:{title:"模型推理",icon:"bi-chat-dots"},ollama:{title:"部署到Ollama",icon:"bi-box-arrow-up"},intro:{title:"关于ElianFactory",icon:"bi-info-circle"}}}},methods:{changePage:function(a){this.$emit("change-page",a)}}};var b=t(1241);const g=(0,b.A)(v,[["render",f],["__scopeId","data-v-2883bdb1"]]),h=g;var k={class:"row mt-3",id:"gpu-info-container"},L={class:"col-12"},_={class:"card"},y={class:"card-header bg-primary text-white"},w={class:"card-body"},D={key:0,class:"loading-spinner"},x={key:1,class:"alert alert-danger"},E={key:2,class:"alert alert-warning"},C={key:3},P={class:"row mt-3"},S={class:"col-12"},U={class:"card"},I={class:"card-body"},T={class:"row mb-3"},F={class:"col-md-6"},W={class:"col-md-6"},q={class:"row mb-3"},V={class:"col-md-6"},O={class:"input-group mb-1"},X=["value"],A={class:"col-md-6"},j={key:0,class:"row mb-3"},R={class:"col-12"},J={class:"card"},$={class:"card-body"},G={class:"data-preview"},M={class:"row mb-3"},H={class:"col-md-4"},z={class:"col-md-4"},B={class:"col-md-4"},Q={class:"row mb-3"},N={class:"col-md-4"},K={class:"col-md-4"},Z={class:"col-md-4"},Y={class:"row mb-3"},aa={class:"col-md-4"},ea={class:"col-md-4"},ta={class:"col-md-4"},ra={class:"row mb-3"},oa={class:"col-md-4"},na={class:"col-md-4"},la={class:"col-md-4"},ia={class:"row mb-3"},sa={class:"col-md-4"},ca={class:"col-md-4"},da={class:"col-md-4"},ua={class:"row mb-3"},ma={class:"col-md-4"},pa={class:"form-check form-switch"},fa={class:"col-md-4"},va={class:"form-check form-switch"},ba={class:"col-md-4"},ga={class:"form-check form-switch"},ha={class:"d-grid gap-2 col-6 mx-auto mt-4"},ka={class:"d-flex justify-content-center"},La=["disabled"],_a={class:"row mt-3 mb-4"},ya={class:"col-12"},wa={class:"card"},Da={class:"card-body"},xa={key:0,class:"training-status"},Ea={key:0,class:"progress"},Ca={key:1,class:"mt-2"},Pa={key:1,class:"text-center text-muted"},Sa={class:"row mt-3 mb-4"},Ua={class:"col-12"},Ia={class:"card logs-card"},Ta={class:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},Fa={class:"d-flex gap-2"},Wa={class:"form-check form-switch me-2"},qa={class:"card-body p-0"},Va={key:0,class:"d-flex justify-content-center align-items-center py-5"},Oa={key:1,class:"text-center py-5 text-muted"},Xa={key:2,class:"training-logs-container"},Aa=["innerHTML"];function ja(a,e,t,n,l,i){var s=(0,o.g2)("GpuCard");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",k,[(0,o.Lk)("div",L,[(0,o.Lk)("div",_,[(0,o.Lk)("div",y,[e[33]||(e[33]=(0,o.Lk)("i",{class:"bi bi-gpu-card me-2"},null,-1)),e[34]||(e[34]=(0,o.eW)("GPU资源监控 ")),(0,o.Lk)("button",{class:"btn btn-sm btn-light float-end",onClick:e[0]||(e[0]=function(){return i.fetchGPUInfo&&i.fetchGPUInfo.apply(i,arguments)})},e[32]||(e[32]=[(0,o.Lk)("i",{class:"bi bi-arrow-clockwise me-1"},null,-1),(0,o.eW)(" 刷新 ")]))]),(0,o.Lk)("div",w,[l.loading?((0,o.uX)(),(0,o.CE)("div",D,e[35]||(e[35]=[(0,o.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,o.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,o.Lk)("p",{class:"ms-2"},"正在检测GPU...",-1)]))):l.gpuError?((0,o.uX)(),(0,o.CE)("div",x,[e[36]||(e[36]=(0,o.Lk)("i",{class:"bi bi-exclamation-circle me-2"},null,-1)),(0,o.eW)((0,c.v_)(l.gpuError),1)])):l.gpus.length?((0,o.uX)(),(0,o.CE)("div",C,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.gpus,(function(a){return(0,o.uX)(),(0,o.Wv)(s,{key:a.id,gpu:a},null,8,["gpu"])})),128))])):((0,o.uX)(),(0,o.CE)("div",E,e[37]||(e[37]=[(0,o.Lk)("i",{class:"bi bi-exclamation-triangle me-2"},null,-1),(0,o.eW)("未检测到可用的GPU ")])))])])])]),(0,o.Lk)("div",P,[(0,o.Lk)("div",S,[(0,o.Lk)("div",U,[e[80]||(e[80]=(0,o.Lk)("div",{class:"card-header bg-success text-white"},[(0,o.Lk)("i",{class:"bi bi-sliders me-2"}),(0,o.eW)("训练参数配置 ")],-1)),(0,o.Lk)("div",I,[(0,o.Lk)("form",{onSubmit:e[26]||(e[26]=(0,r.D$)((function(){return i.startTraining&&i.startTraining.apply(i,arguments)}),["prevent"]))},[e[73]||(e[73]=(0,o.Lk)("h5",{class:"card-title border-bottom pb-2"},[(0,o.Lk)("i",{class:"bi bi-hdd-stack me-2"}),(0,o.eW)("模型配置 ")],-1)),(0,o.Lk)("div",T,[(0,o.Lk)("div",F,[e[38]||(e[38]=(0,o.Lk)("label",{for:"model_name_or_path",class:"form-label"},"模型路径",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control",id:"model_name_or_path","onUpdate:modelValue":e[1]||(e[1]=function(a){return l.formData.model_name_or_path=a}),required:""},null,512),[[r.Jo,l.formData.model_name_or_path]]),e[39]||(e[39]=(0,o.Lk)("div",{class:"form-text"},"本地模型文件夹路径",-1))]),(0,o.Lk)("div",W,[e[40]||(e[40]=(0,o.Lk)("label",{for:"output_dir",class:"form-label"},"输出目录",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control",id:"output_dir","onUpdate:modelValue":e[2]||(e[2]=function(a){return l.formData.output_dir=a}),required:""},null,512),[[r.Jo,l.formData.output_dir]]),e[41]||(e[41]=(0,o.Lk)("div",{class:"form-text"},"训练结果保存位置",-1))])]),e[74]||(e[74]=(0,o.Lk)("h5",{class:"card-title border-bottom pb-2 mt-4"},[(0,o.Lk)("i",{class:"bi bi-file-earmark-text me-2"}),(0,o.eW)("数据配置 ")],-1)),(0,o.Lk)("div",q,[(0,o.Lk)("div",V,[e[44]||(e[44]=(0,o.Lk)("label",{for:"train_file",class:"form-label"},"训练数据文件",-1)),(0,o.Lk)("div",O,[(0,o.bo)((0,o.Lk)("select",{class:"form-select",id:"train_file","onUpdate:modelValue":e[3]||(e[3]=function(a){return l.formData.train_file=a}),required:"",onChange:e[4]||(e[4]=function(){return i.previewDataFile&&i.previewDataFile.apply(i,arguments)})},[e[42]||(e[42]=(0,o.Lk)("option",{value:"",disabled:""},"请选择训练数据文件",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.dataFiles,(function(a){return(0,o.uX)(),(0,o.CE)("option",{key:a,value:"data/"+a},(0,c.v_)(a),9,X)})),128))],544),[[r.u1,l.formData.train_file]]),(0,o.Lk)("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[5]||(e[5]=function(){return i.refreshDataFiles&&i.refreshDataFiles.apply(i,arguments)})},e[43]||(e[43]=[(0,o.Lk)("i",{class:"bi bi-arrow-clockwise"},null,-1)]))]),e[45]||(e[45]=(0,o.Lk)("div",{class:"form-text"},"选择JSONL格式的训练数据",-1))]),(0,o.Lk)("div",A,[e[46]||(e[46]=(0,o.Lk)("label",{for:"max_seq_length",class:"form-label"},"最大序列长度",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number",class:"form-control",id:"max_seq_length","onUpdate:modelValue":e[6]||(e[6]=function(a){return l.formData.max_seq_length=a}),min:"1",required:""},null,512),[[r.Jo,l.formData.max_seq_length,void 0,{number:!0}]]),e[47]||(e[47]=(0,o.Lk)("div",{class:"form-text"},"输入序列的最大长度",-1))])]),l.dataPreview?((0,o.uX)(),(0,o.CE)("div",j,[(0,o.Lk)("div",R,[(0,o.Lk)("div",J,[e[48]||(e[48]=(0,o.Lk)("div",{class:"card-header bg-light"},[(0,o.Lk)("i",{class:"bi bi-file-text me-2"}),(0,o.eW)("数据预览 ")],-1)),(0,o.Lk)("div",$,[(0,o.Lk)("pre",G,(0,c.v_)(l.dataPreview),1)])])])])):(0,o.Q3)("",!0),e[75]||(e[75]=(0,o.Lk)("h5",{class:"card-title border-bottom pb-2 mt-4"},[(0,o.Lk)("i",{class:"bi bi-gear-wide-connected me-2"}),(0,o.eW)("训练超参数 ")],-1)),(0,o.Lk)("div",M,[(0,o.Lk)("div",H,[e[49]||(e[49]=(0,o.Lk)("label",{for:"num_train_epochs",class:"form-label"},"训练轮数",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number",class:"form-control",id:"num_train_epochs","onUpdate:modelValue":e[7]||(e[7]=function(a){return l.formData.num_train_epochs=a}),min:"1",required:""},null,512),[[r.Jo,l.formData.num_train_epochs,void 0,{number:!0}]])]),(0,o.Lk)("div",z,[e[50]||(e[50]=(0,o.Lk)("label",{for:"per_device_train_batch_size",class:"form-label"},"批次大小",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number",class:"form-control",id:"per_device_train_batch_size","onUpdate:modelValue":e[8]||(e[8]=function(a){return l.formData.per_device_train_batch_size=a}),min:"1",required:""},null,512),[[r.Jo,l.formData.per_device_train_batch_size,void 0,{number:!0}]])]),(0,o.Lk)("div",B,[e[51]||(e[51]=(0,o.Lk)("label",{for:"gradient_accumulation_steps",class:"form-label"},"梯度累积步数",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number",class:"form-control",id:"gradient_accumulation_steps","onUpdate:modelValue":e[9]||(e[9]=function(a){return l.formData.gradient_accumulation_steps=a}),min:"1",required:""},null,512),[[r.Jo,l.formData.gradient_accumulation_steps,void 0,{number:!0}]])])]),(0,o.Lk)("div",Q,[(0,o.Lk)("div",N,[e[52]||(e[52]=(0,o.Lk)("label",{for:"learning_rate",class:"form-label"},"学习率",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number",class:"form-control",id:"learning_rate","onUpdate:modelValue":e[10]||(e[10]=function(a){return l.formData.learning_rate=a}),step:"0.0001",min:"0",required:""},null,512),[[r.Jo,l.formData.learning_rate,void 0,{number:!0}]])]),(0,o.Lk)("div",K,[e[54]||(e[54]=(0,o.Lk)("label",{for:"lr_scheduler_type",class:"form-label"},"学习率调度器",-1)),(0,o.bo)((0,o.Lk)("select",{class:"form-select",id:"lr_scheduler_type","onUpdate:modelValue":e[11]||(e[11]=function(a){return l.formData.lr_scheduler_type=a}),required:""},e[53]||(e[53]=[(0,o.Lk)("option",{value:"linear"},"线性衰减",-1),(0,o.Lk)("option",{value:"cosine"},"余弦衰减",-1),(0,o.Lk)("option",{value:"polynomial"},"多项式衰减",-1)]),512),[[r.u1,l.formData.lr_scheduler_type]])]),(0,o.Lk)("div",Z,[e[55]||(e[55]=(0,o.Lk)("label",{for:"warmup_steps",class:"form-label"},"预热步数",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number",class:"form-control",id:"warmup_steps","onUpdate:modelValue":e[12]||(e[12]=function(a){return l.formData.warmup_steps=a}),min:"0",required:""},null,512),[[r.Jo,l.formData.warmup_steps,void 0,{number:!0}]])])]),e[76]||(e[76]=(0,o.Lk)("h5",{class:"card-title border-bottom pb-2 mt-4"},[(0,o.Lk)("i",{class:"bi bi-layers me-2"}),(0,o.eW)("LoRA参数 ")],-1)),(0,o.Lk)("div",Y,[(0,o.Lk)("div",aa,[e[56]||(e[56]=(0,o.Lk)("label",{for:"lora_rank",class:"form-label"},"LoRA秩 (r)",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number",class:"form-control",id:"lora_rank","onUpdate:modelValue":e[13]||(e[13]=function(a){return l.formData.lora_rank=a}),min:"1",required:""},null,512),[[r.Jo,l.formData.lora_rank,void 0,{number:!0}]]),e[57]||(e[57]=(0,o.Lk)("div",{class:"form-text"},"越大效果越好，但训练成本更高",-1))]),(0,o.Lk)("div",ea,[e[58]||(e[58]=(0,o.Lk)("label",{for:"lora_alpha",class:"form-label"},"LoRA Alpha",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number",class:"form-control",id:"lora_alpha","onUpdate:modelValue":e[14]||(e[14]=function(a){return l.formData.lora_alpha=a}),min:"1",required:""},null,512),[[r.Jo,l.formData.lora_alpha,void 0,{number:!0}]])]),(0,o.Lk)("div",ta,[e[59]||(e[59]=(0,o.Lk)("label",{for:"lora_dropout",class:"form-label"},"LoRA Dropout",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number",class:"form-control",id:"lora_dropout","onUpdate:modelValue":e[15]||(e[15]=function(a){return l.formData.lora_dropout=a}),step:"0.01",min:"0",max:"1",required:""},null,512),[[r.Jo,l.formData.lora_dropout,void 0,{number:!0}]])])]),e[77]||(e[77]=(0,o.Lk)("h5",{class:"card-title border-bottom pb-2 mt-4"},[(0,o.Lk)("i",{class:"bi bi-save me-2"}),(0,o.eW)("保存和日志设置 ")],-1)),(0,o.Lk)("div",ra,[(0,o.Lk)("div",oa,[e[60]||(e[60]=(0,o.Lk)("label",{for:"logging_steps",class:"form-label"},"日志记录步数",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number",class:"form-control",id:"logging_steps","onUpdate:modelValue":e[16]||(e[16]=function(a){return l.formData.logging_steps=a}),min:"1",required:""},null,512),[[r.Jo,l.formData.logging_steps,void 0,{number:!0}]])]),(0,o.Lk)("div",na,[e[61]||(e[61]=(0,o.Lk)("label",{for:"save_steps",class:"form-label"},"保存检查点步数",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number",class:"form-control",id:"save_steps","onUpdate:modelValue":e[17]||(e[17]=function(a){return l.formData.save_steps=a}),min:"1",required:""},null,512),[[r.Jo,l.formData.save_steps,void 0,{number:!0}]])]),(0,o.Lk)("div",la,[e[62]||(e[62]=(0,o.Lk)("label",{for:"save_total_limit",class:"form-label"},"最大保存检查点数",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number",class:"form-control",id:"save_total_limit","onUpdate:modelValue":e[18]||(e[18]=function(a){return l.formData.save_total_limit=a}),min:"1",required:""},null,512),[[r.Jo,l.formData.save_total_limit,void 0,{number:!0}]])])]),e[78]||(e[78]=(0,o.Lk)("h5",{class:"card-title border-bottom pb-2 mt-4"},[(0,o.Lk)("i",{class:"bi bi-lightning-charge me-2"}),(0,o.eW)("优化设置 ")],-1)),(0,o.Lk)("div",ia,[(0,o.Lk)("div",sa,[e[64]||(e[64]=(0,o.Lk)("label",{for:"optim",class:"form-label"},"优化器",-1)),(0,o.bo)((0,o.Lk)("select",{class:"form-select",id:"optim","onUpdate:modelValue":e[19]||(e[19]=function(a){return l.formData.optim=a}),required:""},e[63]||(e[63]=[(0,o.Lk)("option",{value:"adamw_torch"},"AdamW (PyTorch)",-1),(0,o.Lk)("option",{value:"adamw_hf"},"AdamW (Hugging Face)",-1),(0,o.Lk)("option",{value:"adafactor"},"Adafactor",-1)]),512),[[r.u1,l.formData.optim]])]),(0,o.Lk)("div",ca,[e[66]||(e[66]=(0,o.Lk)("label",{for:"train_mode",class:"form-label"},"训练模式",-1)),(0,o.bo)((0,o.Lk)("select",{class:"form-select",id:"train_mode","onUpdate:modelValue":e[20]||(e[20]=function(a){return l.formData.train_mode=a}),required:""},e[65]||(e[65]=[(0,o.Lk)("option",{value:"lora"},"LoRA",-1),(0,o.Lk)("option",{value:"qlora"},"QLoRA",-1)]),512),[[r.u1,l.formData.train_mode]])]),(0,o.Lk)("div",da,[e[67]||(e[67]=(0,o.Lk)("label",{for:"seed",class:"form-label"},"随机种子",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number",class:"form-control",id:"seed","onUpdate:modelValue":e[21]||(e[21]=function(a){return l.formData.seed=a}),min:"0",required:""},null,512),[[r.Jo,l.formData.seed,void 0,{number:!0}]])])]),e[79]||(e[79]=(0,o.Lk)("h5",{class:"card-title border-bottom pb-2 mt-4"},[(0,o.Lk)("i",{class:"bi bi-puzzle me-2"}),(0,o.eW)("高级选项 ")],-1)),(0,o.Lk)("div",ua,[(0,o.Lk)("div",ma,[(0,o.Lk)("div",pa,[(0,o.bo)((0,o.Lk)("input",{class:"form-check-input",type:"checkbox",id:"fp16","onUpdate:modelValue":e[22]||(e[22]=function(a){return l.formData.fp16=a})},null,512),[[r.lH,l.formData.fp16]]),e[68]||(e[68]=(0,o.Lk)("label",{class:"form-check-label",for:"fp16"},"启用FP16训练",-1))])]),(0,o.Lk)("div",fa,[(0,o.Lk)("div",va,[(0,o.bo)((0,o.Lk)("input",{class:"form-check-input",type:"checkbox",id:"gradient_checkpointing","onUpdate:modelValue":e[23]||(e[23]=function(a){return l.formData.gradient_checkpointing=a})},null,512),[[r.lH,l.formData.gradient_checkpointing]]),e[69]||(e[69]=(0,o.Lk)("label",{class:"form-check-label",for:"gradient_checkpointing"},"梯度检查点",-1))])]),(0,o.Lk)("div",ba,[(0,o.Lk)("div",ga,[(0,o.bo)((0,o.Lk)("input",{class:"form-check-input",type:"checkbox",id:"distributed","onUpdate:modelValue":e[24]||(e[24]=function(a){return l.formData.distributed=a})},null,512),[[r.lH,l.formData.distributed]]),e[70]||(e[70]=(0,o.Lk)("label",{class:"form-check-label",for:"distributed"},"分布式训练",-1))])])]),(0,o.Lk)("div",ha,[(0,o.Lk)("div",ka,[(0,o.Lk)("button",{type:"submit",class:"btn btn-primary btn-lg me-3",disabled:l.formSubmitting},[e[71]||(e[71]=(0,o.Lk)("i",{class:"bi bi-play-circle me-2"},null,-1)),(0,o.eW)(" "+(0,c.v_)(l.formSubmitting?"训练中...":"开始训练"),1)],8,La),(0,o.Lk)("button",{type:"button",class:"btn btn-success btn-lg",onClick:e[25]||(e[25]=function(){return i.saveConfig&&i.saveConfig.apply(i,arguments)})},e[72]||(e[72]=[(0,o.Lk)("i",{class:"bi bi-save me-2"},null,-1),(0,o.eW)(" 保存配置 ")]))])])],32)])])])]),(0,o.Lk)("div",_a,[(0,o.Lk)("div",ya,[(0,o.Lk)("div",wa,[e[84]||(e[84]=(0,o.Lk)("div",{class:"card-header bg-info text-white"},[(0,o.Lk)("i",{class:"bi bi-activity me-2"}),(0,o.eW)("训练状态 ")],-1)),(0,o.Lk)("div",Da,[l.trainingStatus?((0,o.uX)(),(0,o.CE)("div",xa,[(0,o.Lk)("div",{class:(0,c.C4)(["alert",l.statusClass])},[(0,o.Lk)("i",{class:(0,c.C4)(["bi",l.statusIcon,"me-2"])},null,2),(0,o.Lk)("span",null,(0,c.v_)(l.trainingStatus),1)],2),l.trainingStarted&&!l.formSubmitting?((0,o.uX)(),(0,o.CE)("div",Ea,e[81]||(e[81]=[(0,o.Lk)("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:{width:"100%"}},null,-1)]))):(0,o.Q3)("",!0),"alert-danger"===l.statusClass?((0,o.uX)(),(0,o.CE)("div",Ca,[(0,o.Lk)("a",{href:"#",class:"text-danger",onClick:e[27]||(e[27]=(0,r.D$)((function(){return i.resetForm&&i.resetForm.apply(i,arguments)}),["prevent"]))},e[82]||(e[82]=[(0,o.Lk)("i",{class:"bi bi-arrow-counterclockwise me-1"},null,-1),(0,o.eW)(" 重置参数 ")]))])):(0,o.Q3)("",!0)])):((0,o.uX)(),(0,o.CE)("div",Pa,e[83]||(e[83]=[(0,o.Lk)("i",{class:"bi bi-hourglass me-2"},null,-1),(0,o.eW)("没有正在进行的训练任务 ")])))])])])]),(0,o.Lk)("div",Sa,[(0,o.Lk)("div",Ua,[(0,o.Lk)("div",Ia,[(0,o.Lk)("div",Ta,[e[87]||(e[87]=(0,o.Lk)("div",null,[(0,o.Lk)("i",{class:"bi bi-terminal me-2"}),(0,o.eW)("训练日志 ")],-1)),(0,o.Lk)("div",Fa,[(0,o.Lk)("div",Wa,[(0,o.bo)((0,o.Lk)("input",{class:"form-check-input",type:"checkbox",id:"autoScrollSwitch","onUpdate:modelValue":e[28]||(e[28]=function(a){return l.autoScroll=a})},null,512),[[r.lH,l.autoScroll]]),e[85]||(e[85]=(0,o.Lk)("label",{class:"form-check-label small text-light",for:"autoScrollSwitch"},"自动滚动",-1))]),(0,o.Lk)("button",{class:"btn btn-sm btn-outline-light",onClick:e[29]||(e[29]=function(){return i.refreshLogs&&i.refreshLogs.apply(i,arguments)}),title:"刷新日志"},e[86]||(e[86]=[(0,o.Lk)("i",{class:"bi bi-arrow-clockwise"},null,-1)]))])]),(0,o.Lk)("div",qa,[l.logsLoading?((0,o.uX)(),(0,o.CE)("div",Va,e[88]||(e[88]=[(0,o.Lk)("div",{class:"spinner-border text-primary me-2",role:"status"},[(0,o.Lk)("span",{class:"visually-hidden"},"加载中...")],-1),(0,o.Lk)("span",null,"正在加载日志...",-1)]))):i.formattedLogs?((0,o.uX)(),(0,o.CE)("div",Xa,[(0,o.Lk)("pre",{class:"training-logs",onScroll:e[30]||(e[30]=function(){return i.handleLogScroll&&i.handleLogScroll.apply(i,arguments)}),innerHTML:i.formattedLogs},null,40,Aa),l.autoScroll?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:0,class:"scroll-to-bottom-btn",onClick:e[31]||(e[31]=function(){return i.scrollToBottom&&i.scrollToBottom.apply(i,arguments)}),title:"跳转到最新日志"},e[90]||(e[90]=[(0,o.Lk)("i",{class:"bi bi-arrow-down-circle-fill"},null,-1)])))])):((0,o.uX)(),(0,o.CE)("div",Oa,e[89]||(e[89]=[(0,o.Lk)("i",{class:"bi bi-file-earmark-text fs-3 mb-2 d-block"},null,-1),(0,o.Lk)("span",null,"暂无训练日志或训练尚未开始...",-1)])))])])])])])}var Ra=t(8653),Ja=t(5809),$a=(t(6280),t(6918),t(8706),t(2062),t(739),t(8111),t(1701),t(3110),t(6099),t(7495),t(5440),t(6031),t(2010),{class:"gpu-card hover-scale"}),Ga={class:"row"},Ma={class:"col-md-9"},Ha={class:"mb-1"},za={class:"badge bg-success"},Ba={class:"mb-1"},Qa={class:"col-md-3 text-end"},Na={class:"text-primary fw-bold"},Ka={class:"progress memory-bar mb-2"},Za=["aria-valuenow"],Ya={class:"progress"},ae=["aria-valuenow"];function ee(a,e,t,r,n,l){return(0,o.uX)(),(0,o.CE)("div",$a,[(0,o.Lk)("div",Ga,[(0,o.Lk)("div",Ma,[(0,o.Lk)("h5",null,[e[0]||(e[0]=(0,o.Lk)("i",{class:"bi bi-gpu-card me-2"},null,-1)),(0,o.eW)((0,c.v_)(t.gpu.name),1)]),(0,o.Lk)("p",Ha,[e[1]||(e[1]=(0,o.eW)("状态: ")),(0,o.Lk)("span",za,(0,c.v_)(t.gpu.status||"可用"),1)]),(0,o.Lk)("p",Ba,"总内存: "+(0,c.v_)(t.gpu.memory_total)+" MB",1),(0,o.Lk)("p",null,"可用内存: "+(0,c.v_)(t.gpu.memory_free)+" MB ("+(0,c.v_)(l.memoryUsagePercent)+"% 已使用)",1)]),(0,o.Lk)("div",Qa,[(0,o.Lk)("div",Na,"利用率: "+(0,c.v_)(t.gpu.utilization)+"%",1)])]),(0,o.Lk)("div",Ka,[(0,o.Lk)("div",{class:(0,c.C4)(["progress-bar",l.memoryBarClass]),role:"progressbar",style:(0,c.Tr)({width:l.memoryUsagePercent+"%"}),"aria-valuenow":l.memoryUsagePercent,"aria-valuemin":"0","aria-valuemax":"100"},(0,c.v_)(l.memoryUsagePercent)+"%",15,Za)]),(0,o.Lk)("div",null,[e[2]||(e[2]=(0,o.Lk)("span",{class:"me-2"},"GPU利用率:",-1)),(0,o.Lk)("div",Ya,[(0,o.Lk)("div",{class:"progress-bar bg-info",role:"progressbar",style:(0,c.Tr)({width:t.gpu.utilization+"%"}),"aria-valuenow":t.gpu.utilization,"aria-valuemin":"0","aria-valuemax":"100"},(0,c.v_)(t.gpu.utilization)+"%",13,ae)])])])}const te={name:"GpuCard",props:{gpu:{type:Object,required:!0}},computed:{memoryUsagePercent:function(){if(!this.gpu||!this.gpu.memory_total)return 0;var a=this.gpu.memory_total-this.gpu.memory_free;return Math.round(a/this.gpu.memory_total*100)},memoryBarClass:function(){var a=this.memoryUsagePercent;return a<50?"bg-info":a<80?"bg-warning":"bg-danger"}}},re=(0,b.A)(te,[["render",ee],["__scopeId","data-v-4ba3c0c4"]]),oe=re;var ne=["success"];const le={name:"TrainingView",components:{GpuCard:oe},data:function(){return{gpus:[],loading:!0,gpuError:null,formData:{model_name_or_path:"/ckpt/ds",output_dir:"/output/your_task/lora",train_file:"",num_train_epochs:100,per_device_train_batch_size:2,gradient_accumulation_steps:4,learning_rate:2e-4,max_seq_length:100,logging_steps:1,save_steps:2,save_total_limit:1,lr_scheduler_type:"constant_with_warmup",warmup_steps:1,lora_rank:8,lora_alpha:16,lora_dropout:.05,gradient_checkpointing:!0,optim:"adamw_torch",train_mode:"lora",seed:42,fp16:!1,distributed:!1},defaultFormData:null,formSubmitting:!1,trainingStatus:null,trainingStarted:!1,statusClass:"alert-info",statusIcon:"bi-info-circle",dataFiles:[],dataPreview:null,trainingLogs:"",logsPolling:null,logsLoading:!1,autoScroll:!0,previousLogLength:0,configName:"",savedConfigs:[],configLoading:!1,configError:null}},computed:{formattedLogs:function(){if(!this.trainingLogs)return"";var a=this.trainingLogs.replace(/(error|失败|错误|Exception|exception)/gi,'<span style="color:#f38ba8;font-weight:bold;">$1</span>').replace(/(success|成功|完成|完毕)/gi,'<span style="color:#a6e3a1;font-weight:bold;">$1</span>').replace(/(warning|警告)/gi,'<span style="color:#f9e2af;font-weight:bold;">$1</span>').replace(/(train|训练|epoch|batch|step|loss)/gi,'<span style="color:#89b4fa;font-weight:bold;">$1</span>').replace(/(\d+%)/g,'<span style="color:#f5c2e7;font-weight:bold;">$1</span>').replace(/(@Elian)/g,'<span style="color:#fab387;font-weight:bold;">$1</span>').replace(/(🌟+|☀️+)/g,'<span style="color:#fab387;">$1</span>').replace(/(\|█+[ █]*\|)/g,'<span style="color:#89dceb;">$1</span>').replace(/(\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2})/g,'<span style="color:#94e2d5;">$1</span>').replace(/(\([^)]+\))/g,'<span style="color:#cba6f7;">$1</span>');return a}},mounted:function(){this.fetchGPUInfo(),this.fetchDefaultConfig(),this.fetchDataFiles(),this.fetchTrainingLogs(!0)},methods:{fetchGPUInfo:function(){var a=this;this.loading=!0,this.gpuError=null,fetch("/api/gpu/status").then((function(a){if(!a.ok)throw new Error("GPU检测失败");return a.json()})).then((function(e){if(!e.success||!e.data)throw new Error(e.message||"GPU检测失败");a.gpus=e.data,a.loading=!1}))["catch"]((function(e){console.error("获取GPU信息失败:",e),a.gpuError="获取GPU信息失败: ".concat(e.message),a.loading=!1}))},fetchDefaultConfig:function(){var a=this;fetch("/api/default-config").then((function(a){if(!a.ok)throw new Error("获取默认配置失败");return a.json()})).then((function(e){if(!e.success)throw new Error(e.message||"获取默认配置失败");e.success;var t=(0,Ja.A)(e,ne);a.formData=(0,Ra.A)({},t),a.defaultFormData=(0,Ra.A)({},t)}))["catch"]((function(a){console.error("获取默认配置失败:",a)}))},resetForm:function(){this.defaultFormData&&(this.formData=(0,Ra.A)({},this.defaultFormData))},startTraining:function(){var a=this;this.formSubmitting=!0,this.trainingStatus="训练任务正在启动...",this.statusClass="alert-info",this.statusIcon="bi-info-circle",this.trainingStarted=!1,fetch("/api/train",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.formData)}).then((function(e){if(!e.ok)throw a.formSubmitting=!1,a.trainingStarted=!1,new Error("启动训练任务失败，服务器返回："+e.status);return e.json()})).then((function(e){if(!e.success)return a.trainingStatus=e.message||"训练启动失败",a.statusClass="alert-danger",a.statusIcon="bi-exclamation-circle",a.formSubmitting=!1,a.trainingStarted=!1,void(e.error&&(a.trainingLogs="错误详情: ".concat(e.error,"\n\n")));a.trainingStatus=e.message||"训练任务已成功启动",a.statusClass="alert-success",a.statusIcon="bi-check-circle-fill",a.trainingStarted=!0,a.startLogsPolling()}))["catch"]((function(e){console.error("训练请求失败:",e),a.trainingStatus="训练请求失败: ".concat(e.message),a.statusClass="alert-danger",a.statusIcon="bi-exclamation-circle",a.formSubmitting=!1,a.trainingStarted=!1}))},fetchDataFiles:function(){var a=this;fetch("/api/data/files").then((function(a){if(!a.ok)throw new Error("获取数据文件列表失败");return a.json()})).then((function(e){if(!e.success)throw new Error(e.message||"获取数据文件列表失败");a.dataFiles=e.files}))["catch"]((function(a){console.error("获取数据文件列表失败:",a),alert("获取数据文件列表失败: "+a.message)}))},refreshDataFiles:function(){this.dataPreview=null,this.fetchDataFiles()},previewDataFile:function(){var a=this;if(this.formData.train_file){var e=this.formData.train_file.split("/").pop();fetch("/api/data/preview?file=".concat(encodeURIComponent(e))).then((function(a){if(!a.ok)throw new Error("获取数据预览失败");return a.json()})).then((function(e){if(!e.success)throw new Error(e.message||"获取数据预览失败");a.dataPreview=e.content}))["catch"]((function(e){console.error("获取数据预览失败:",e),a.dataPreview="获取预览失败: ".concat(e.message)}))}else this.dataPreview=null},startLogsPolling:function(){var a=this;this.stopLogsPolling(),this.logsPolling=setInterval((function(){a.fetchTrainingLogs(!1)}),2e3)},stopLogsPolling:function(){this.logsPolling&&(clearInterval(this.logsPolling),this.logsPolling=null)},fetchTrainingLogs:function(){var a=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&(this.logsLoading=!0);var t=document.querySelector(".training-logs"),r=!1;t&&(r=Math.abs(t.scrollHeight-t.scrollTop-t.clientHeight<50),this.previousLogLength>0&&!r&&(this.autoScroll=!1)),fetch("/api/train/logs").then((function(a){if(!a.ok)throw new Error("获取训练日志失败");return a.json()})).then((function(t){if(e&&(a.logsLoading=!1),t.success){var r=t.logs||"";a.previousLogLength=r.length,a.trainingLogs=r,a.$nextTick((function(){if(a.autoScroll){var e=document.querySelector(".training-logs");e&&(e.scrollTop=e.scrollHeight)}}))}}))["catch"]((function(t){e&&(a.logsLoading=!1),console.error("获取训练日志失败:",t)}))},handleLogScroll:function(a){var e=a.target,t=Math.abs(e.scrollHeight-e.scrollTop-e.clientHeight<50);this.autoScroll=t},saveConfig:function(){console.log("更新配置到llm/configs/default_config.json中");var a=(0,Ra.A)({},this.formData);return console.log("配置参数信息为：",a),fetch("/api/config/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config_name:"default_config",config_data:a})}).then((function(a){if(console.log("配置保存响应状态:",a.status,a.statusText),!a.ok)throw new Error("保存配置失败，HTTP状态: ".concat(a.status," ").concat(a.statusText));return a.json()})).then((function(a){if(console.log("配置保存响应数据:",a),a.success)return console.log("配置保存成功，路径:",a.path),alert("配置已保存成功！"),a;throw new Error(a.error||a.message||"保存配置失败")}))["catch"]((function(a){throw console.error("保存配置失败:",a),alert("保存配置失败: "+a.message),a}))},refreshConfigs:function(){var a=this;this.configLoading=!0,this.configError=null,this.savedConfigs=[],fetch("/api/config/list").then((function(a){if(!a.ok)throw new Error("获取配置列表失败");return a.json()})).then((function(e){if(a.configLoading=!1,!e.success)throw new Error(e.message||"获取配置列表失败");a.savedConfigs=e.configs.map((function(a){return{name:a}}))}))["catch"]((function(e){console.error("获取配置列表失败:",e),a.configError="获取配置列表失败: "+e.message,a.configLoading=!1}))},loadConfig:function(a){var e=this;fetch("/api/config/load?name=".concat(encodeURIComponent(a))).then((function(a){if(!a.ok)throw new Error("加载配置失败");return a.json()})).then((function(a){if(!a.success||!a.config)throw new Error(a.message||"加载配置失败");e.formData=(0,Ra.A)({},a.config),e.loadConfigModal&&e.loadConfigModal.hide(),e.formData.train_file&&e.previewDataFile()}))["catch"]((function(a){console.error("加载配置失败:",a),alert("加载配置失败: "+a.message)}))},deleteConfig:function(a){var e=this;confirm('确定要删除配置 "'.concat(a,'" 吗？'))&&fetch("/api/config/delete?name=".concat(encodeURIComponent(a)),{method:"DELETE"}).then((function(a){if(!a.ok)throw new Error("删除配置失败");return a.json()})).then((function(a){if(!a.success)throw new Error(a.message||"删除配置失败");e.refreshConfigs()}))["catch"]((function(a){console.error("删除配置失败:",a),alert("删除配置失败: "+a.message)}))},refreshLogs:function(){this.fetchTrainingLogs(!0)},scrollToBottom:function(){var a=document.querySelector(".training-logs");a&&(a.scrollTop=a.scrollHeight,this.autoScroll=!0)}},beforeUnmount:function(){this.stopLogsPolling()}},ie=(0,b.A)(le,[["render",ja],["__scopeId","data-v-cb3ac9ea"]]),se=ie;var ce={class:"inference-view"},de={class:"row mt-3"},ue={class:"col-12"},me={class:"card"},pe={class:"card-body"},fe={class:"mb-3"},ve={class:"mb-3"},be={class:"row mb-3"},ge={class:"col-md-4"},he={class:"col-md-4"},ke={class:"col-md-4"},Le={class:"d-grid gap-2 col-6 mx-auto"},_e=["disabled"],ye={class:"row mt-3"},we={class:"col-12"},De={class:"card"},xe={class:"card-body"},Ee={key:0,class:"loading-spinner"},Ce={key:1,class:"alert alert-danger"},Pe={key:2,class:"inference-result"},Se={class:"alert alert-light border"},Ue={class:"mb-0 response-text"},Ie={key:3,class:"text-center text-muted"};function Te(a,e,t,n,l,i){return(0,o.uX)(),(0,o.CE)("div",ce,[(0,o.Lk)("div",de,[(0,o.Lk)("div",ue,[(0,o.Lk)("div",me,[e[14]||(e[14]=(0,o.Lk)("div",{class:"card-header bg-primary text-white"},[(0,o.Lk)("i",{class:"bi bi-chat-dots me-2"}),(0,o.eW)("模型推理 ")],-1)),(0,o.Lk)("div",pe,[(0,o.Lk)("form",{onSubmit:e[5]||(e[5]=(0,r.D$)((function(){return i.runInference&&i.runInference.apply(i,arguments)}),["prevent"]))},[(0,o.Lk)("div",fe,[e[6]||(e[6]=(0,o.Lk)("label",{for:"model_path",class:"form-label"},"模型路径",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control",id:"model_path","onUpdate:modelValue":e[0]||(e[0]=function(a){return l.inferenceData.model_path=a}),placeholder:"输入模型路径，例如：./output/task_name/lora",required:""},null,512),[[r.Jo,l.inferenceData.model_path]]),e[7]||(e[7]=(0,o.Lk)("div",{class:"form-text"},"训练好的模型路径或检查点",-1))]),(0,o.Lk)("div",ve,[e[8]||(e[8]=(0,o.Lk)("label",{for:"prompt",class:"form-label"},"输入内容",-1)),(0,o.bo)((0,o.Lk)("textarea",{class:"form-control",id:"prompt","onUpdate:modelValue":e[1]||(e[1]=function(a){return l.inferenceData.prompt=a}),rows:"5",placeholder:"请输入您想问的问题...",required:""},null,512),[[r.Jo,l.inferenceData.prompt]])]),(0,o.Lk)("div",be,[(0,o.Lk)("div",ge,[e[9]||(e[9]=(0,o.Lk)("label",{for:"max_new_tokens",class:"form-label"},"最大生成长度",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number",class:"form-control",id:"max_new_tokens","onUpdate:modelValue":e[2]||(e[2]=function(a){return l.inferenceData.max_new_tokens=a}),min:"1",required:""},null,512),[[r.Jo,l.inferenceData.max_new_tokens,void 0,{number:!0}]])]),(0,o.Lk)("div",he,[e[10]||(e[10]=(0,o.Lk)("label",{for:"temperature",class:"form-label"},"温度",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number",class:"form-control",id:"temperature","onUpdate:modelValue":e[3]||(e[3]=function(a){return l.inferenceData.temperature=a}),step:"0.1",min:"0.1",max:"2.0",required:""},null,512),[[r.Jo,l.inferenceData.temperature,void 0,{number:!0}]]),e[11]||(e[11]=(0,o.Lk)("div",{class:"form-text"},"值越高，回复越随机",-1))]),(0,o.Lk)("div",ke,[e[12]||(e[12]=(0,o.Lk)("label",{for:"top_p",class:"form-label"},"Top P",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number",class:"form-control",id:"top_p","onUpdate:modelValue":e[4]||(e[4]=function(a){return l.inferenceData.top_p=a}),step:"0.01",min:"0",max:"1",required:""},null,512),[[r.Jo,l.inferenceData.top_p,void 0,{number:!0}]])])]),(0,o.Lk)("div",Le,[(0,o.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:l.inferencing},[e[13]||(e[13]=(0,o.Lk)("i",{class:"bi bi-send me-2"},null,-1)),(0,o.eW)(" "+(0,c.v_)(l.inferencing?"生成中...":"开始推理"),1)],8,_e)])],32)])])])]),(0,o.Lk)("div",ye,[(0,o.Lk)("div",we,[(0,o.Lk)("div",De,[e[18]||(e[18]=(0,o.Lk)("div",{class:"card-header bg-success text-white"},[(0,o.Lk)("i",{class:"bi bi-reply-fill me-2"}),(0,o.eW)("推理结果 ")],-1)),(0,o.Lk)("div",xe,[l.inferencing?((0,o.uX)(),(0,o.CE)("div",Ee,e[15]||(e[15]=[(0,o.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,o.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,o.Lk)("p",{class:"ms-2"},"模型思考中，请稍候...",-1)]))):l.inferenceError?((0,o.uX)(),(0,o.CE)("div",Ce,[e[16]||(e[16]=(0,o.Lk)("i",{class:"bi bi-exclamation-circle me-2"},null,-1)),(0,o.eW)((0,c.v_)(l.inferenceError),1)])):l.inferenceResult?((0,o.uX)(),(0,o.CE)("div",Pe,[(0,o.Lk)("div",Se,[(0,o.Lk)("pre",Ue,(0,c.v_)(l.inferenceResult),1)])])):((0,o.uX)(),(0,o.CE)("div",Ie,e[17]||(e[17]=[(0,o.Lk)("i",{class:"bi bi-chat-square-text me-2"},null,-1),(0,o.eW)('在上方输入内容后点击"开始推理"按钮 ')])))])])])])])}const Fe={name:"InferenceView",data:function(){return{inferenceData:{model_path:"./output/task_name/lora",prompt:"",max_new_tokens:2048,temperature:.7,top_p:.9},inferencing:!1,inferenceResult:null,inferenceError:null}},methods:{runInference:function(){var a=this;this.inferencing=!0,this.inferenceError=null,this.inferenceResult=null,fetch("/api/inference",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.inferenceData)}).then((function(a){if(!a.ok)throw new Error("推理请求失败");return a.json()})).then((function(e){if(!e.success)throw new Error(e.message||"推理请求失败");a.pollInferenceResult(e.output_file)}))["catch"]((function(e){a.inferenceError="推理失败: ".concat(e.message),a.inferencing=!1}))},pollInferenceResult:function(a){var e=this,t=encodeURIComponent(a),r=setInterval((function(){fetch("/api/inference/result?file=".concat(t)).then((function(a){if(!a.ok)throw new Error("获取推理结果失败");return a.json()})).then((function(a){a.success&&(clearInterval(r),e.inferenceResult=a.result,e.inferencing=!1)}))["catch"]((function(a){clearInterval(r),e.inferenceError="获取推理结果失败: ".concat(a.message),e.inferencing=!1}))}),3e3);setTimeout((function(){e.inferencing&&(clearInterval(r),e.inferenceError="推理超时，请检查模型路径是否正确或尝试简化输入内容",e.inferencing=!1)}),3e5)}}},We=(0,b.A)(Fe,[["render",Te],["__scopeId","data-v-450249cd"]]),qe=We;var Ve={class:"container-fluid"};function Oe(a,e,t,r,n,l){return(0,o.uX)(),(0,o.CE)("div",Ve,e[0]||(e[0]=[(0,o.Fv)('<div class="row" data-v-42c33a46><div class="col-12" data-v-42c33a46><div class="card" data-v-42c33a46><div class="card-header bg-primary text-white" data-v-42c33a46><h4 data-v-42c33a46>ElianFactory 功能介绍</h4></div><div class="card-body" data-v-42c33a46><div class="row" data-v-42c33a46><div class="col-md-6 mb-4" data-v-42c33a46><h5 class="border-bottom pb-2" data-v-42c33a46>什么是ElianFactory?</h5><p data-v-42c33a46>ElianFactory是一个专为Windows平台设计的大型语言模型（LLM）训练和推理平台，旨在为AI研发人员、学术研究者和企业提供便捷的LLM训练环境。无需复杂配置，即可在Windows系统上轻松开展模型训练工作。</p><h5 class="border-bottom pb-2 mt-4" data-v-42c33a46>核心优势</h5><ul class="feature-list" data-v-42c33a46><li data-v-42c33a46><span class="feature-icon" data-v-42c33a46><i class="bi bi-lightning-charge-fill" data-v-42c33a46></i></span> <strong data-v-42c33a46>简单易用</strong> - 图形化界面，无需编写复杂命令</li><li data-v-42c33a46><span class="feature-icon" data-v-42c33a46><i class="bi bi-speedometer2" data-v-42c33a46></i></span> <strong data-v-42c33a46>训练方式</strong> - SFT、DPO、PPO、GRPO</li><li data-v-42c33a46><span class="feature-icon" data-v-42c33a46><i class="bi bi-cpu" data-v-42c33a46></i></span> <strong data-v-42c33a46>多GPU支持</strong> - 支持DDP和DeepSpeed多卡并行训练，提升训练效率</li><li data-v-42c33a46><span class="feature-icon" data-v-42c33a46><i class="bi bi-box-seam" data-v-42c33a46></i></span> <strong data-v-42c33a46>预配置环境</strong> - 预装常用库和依赖，开箱即用</li><li data-v-42c33a46><span class="feature-icon" data-v-42c33a46><i class="bi bi-graph-up" data-v-42c33a46></i></span> <strong data-v-42c33a46>实时监控</strong> - 训练过程可视化，实时查看模型性能</li></ul></div><div class="col-md-6" data-v-42c33a46><h5 class="border-bottom pb-2" data-v-42c33a46>适用场景</h5><div class="scenario-card" data-v-42c33a46><h6 data-v-42c33a46><i class="bi bi-mortarboard" data-v-42c33a46></i> 学术研究</h6><p data-v-42c33a46>为研究人员提供简单易用的环境，快速验证研究想法，支持各类LLM架构实验。</p></div><div class="scenario-card" data-v-42c33a46><h6 data-v-42c33a46><i class="bi bi-building" data-v-42c33a46></i> 企业应用</h6><p data-v-42c33a46>帮助企业基于通用语言模型进行领域微调，构建特定行业的AI解决方案。</p></div><div class="scenario-card" data-v-42c33a46><h6 data-v-42c33a46><i class="bi bi-person-workspace" data-v-42c33a46></i> 个人开发者</h6><p data-v-42c33a46>降低AI开发门槛，使个人开发者也能够训练和部署自己的语言模型。</p></div><h5 class="border-bottom pb-2 mt-4" data-v-42c33a46>技术规格</h5><table class="table table-sm specs-table" data-v-42c33a46><tbody data-v-42c33a46><tr data-v-42c33a46><td data-v-42c33a46><strong data-v-42c33a46>支持模型</strong></td><td data-v-42c33a46>DeepSeek、Qwen、Llama等主流大模型</td></tr><tr data-v-42c33a46><td data-v-42c33a46><strong data-v-42c33a46>训练方式</strong></td><td data-v-42c33a46>LoRA、QLoRA等参数高效训练方法</td></tr></tbody></table></div></div><div class="text-center mt-4" data-v-42c33a46><h5 class="border-bottom pb-2" data-v-42c33a46>点击左侧菜单中的&quot;模型训练&quot;或&quot;模型推理&quot;选项，开始您的LLM训练之旅！</h5></div></div><div class="card-header bg-primary text-white" data-v-42c33a46><h4 data-v-42c33a46>ElianFactory 版本介绍</h4></div><div class="card-body" data-v-42c33a46><div class="row" data-v-42c33a46><div class="col-md-6 mb-4" data-v-42c33a46><h5 class="border-bottom pb-2" data-v-42c33a46>ElianFactory-V1.0.0</h5><p data-v-42c33a46>本项目开发了一款可以在Windows系统上进行大模型微调训练的工具，微调推理框架基于transformers库进行开发。</p><h5 class="border-bottom pb-2 mt-4" data-v-42c33a46>V1.0.0核心功能</h5><ul class="feature-list" data-v-42c33a46><li data-v-42c33a46><span class="feature-icon" data-v-42c33a46><i class="bi bi-lightning-charge-fill" data-v-42c33a46></i></span> <strong data-v-42c33a46>SFT训练</strong> - 一键式训练您的LLM</li><li data-v-42c33a46><span class="feature-icon" data-v-42c33a46><i class="bi bi-speedometer2" data-v-42c33a46></i></span> <strong data-v-42c33a46>训练方式</strong> - LORA、QLORA</li><li data-v-42c33a46><span class="feature-icon" data-v-42c33a46><i class="bi bi-cpu" data-v-42c33a46></i></span> <strong data-v-42c33a46>多GPU支持</strong> - 支持DDP多卡并行训练，提升训练效率</li><li data-v-42c33a46><span class="feature-icon" data-v-42c33a46><i class="bi bi-graph-up" data-v-42c33a46></i></span> <strong data-v-42c33a46>实时监控</strong> - 训练过程可视化，实时查看模型性能</li></ul></div><div class="col-md-6" data-v-42c33a46><h5 class="border-bottom pb-2" data-v-42c33a46>开发者信息</h5><div class="scenario-card" data-v-42c33a46><h6 data-v-42c33a46><i class="bi bi-person-workspace" data-v-42c33a46></i> Elian</h6><p data-v-42c33a46>Elian是Elian-Factory的第一发起人，您可以通过lizimo@nuist.edu.cn联系到ta。</p></div><h5 class="border-bottom pb-2 mt-4" data-v-42c33a46>V1.0.1计划增加功能</h5><table class="table table-sm specs-table" data-v-42c33a46><tbody data-v-42c33a46><tr data-v-42c33a46><td data-v-42c33a46><strong data-v-42c33a46>数据生成</strong></td><td data-v-42c33a46>调用API或者ollama进行数据生成的功能</td></tr><tr data-v-42c33a46><td data-v-42c33a46><strong data-v-42c33a46>集成Ollama</strong></td><td data-v-42c33a46>将训练好的模型集成到Ollama中进行使用</td></tr></tbody></table></div></div></div></div></div></div>',1)]))}const Xe={name:"ElianFactoryIntroView"},Ae=(0,b.A)(Xe,[["render",Oe],["__scopeId","data-v-42c33a46"]]),je=Ae;var Re={class:"ollama-deploy-view"},Je={class:"row mt-3"},$e={class:"col-12"},Ge={class:"card"},Me={class:"card-body"},He={class:"mb-3"},ze={class:"mb-3"},Be={class:"d-grid gap-2 col-6 mx-auto"},Qe=["disabled"],Ne={class:"row mt-3"},Ke={class:"col-12"},Ze={class:"card"},Ye={class:"card-body"},at={key:0,class:"loading-spinner"},et={key:1,class:"alert alert-danger"},tt={key:2,class:"alert alert-success"},rt={key:3,class:"text-center text-muted"};function ot(a,e,t,n,l,i){return(0,o.uX)(),(0,o.CE)("div",Re,[(0,o.Lk)("div",Je,[(0,o.Lk)("div",$e,[(0,o.Lk)("div",Ge,[e[8]||(e[8]=(0,o.Lk)("div",{class:"card-header bg-primary text-white"},[(0,o.Lk)("i",{class:"bi bi-box-arrow-up me-2"}),(0,o.eW)("部署到Ollama ")],-1)),(0,o.Lk)("div",Me,[(0,o.Lk)("form",{onSubmit:e[2]||(e[2]=(0,r.D$)((function(){return i.deployToOllama&&i.deployToOllama.apply(i,arguments)}),["prevent"]))},[(0,o.Lk)("div",He,[e[3]||(e[3]=(0,o.Lk)("label",{for:"model_path",class:"form-label"},"模型路径",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control",id:"model_path","onUpdate:modelValue":e[0]||(e[0]=function(a){return l.deployData.model_path=a}),placeholder:"输入模型路径，例如：/output/your_task/lora/weight",required:""},null,512),[[r.Jo,l.deployData.model_path]]),e[4]||(e[4]=(0,o.Lk)("div",{class:"form-text"},"微调后的模型路径，通常是训练输出目录下的weight文件夹",-1))]),(0,o.Lk)("div",ze,[e[5]||(e[5]=(0,o.Lk)("label",{for:"model_name",class:"form-label"},"Ollama模型名称",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control",id:"model_name","onUpdate:modelValue":e[1]||(e[1]=function(a){return l.deployData.model_name=a}),placeholder:"输入Ollama模型名称，例如：my-model",required:""},null,512),[[r.Jo,l.deployData.model_name]]),e[6]||(e[6]=(0,o.Lk)("div",{class:"form-text"},"在Ollama中使用的模型名称，只能包含字母、数字、连字符和下划线",-1))]),(0,o.Lk)("div",Be,[(0,o.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:l.deploying},[e[7]||(e[7]=(0,o.Lk)("i",{class:"bi bi-box-arrow-up me-2"},null,-1)),(0,o.eW)(" "+(0,c.v_)(l.deploying?"部署中...":"开始部署"),1)],8,Qe)])],32)])])])]),(0,o.Lk)("div",Ne,[(0,o.Lk)("div",Ke,[(0,o.Lk)("div",Ze,[e[13]||(e[13]=(0,o.Lk)("div",{class:"card-header bg-success text-white"},[(0,o.Lk)("i",{class:"bi bi-check-circle me-2"}),(0,o.eW)("部署结果 ")],-1)),(0,o.Lk)("div",Ye,[l.deploying?((0,o.uX)(),(0,o.CE)("div",at,e[9]||(e[9]=[(0,o.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,o.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,o.Lk)("p",{class:"ms-2"},"模型部署中，请稍候...",-1)]))):l.deployError?((0,o.uX)(),(0,o.CE)("div",et,[e[10]||(e[10]=(0,o.Lk)("i",{class:"bi bi-exclamation-circle me-2"},null,-1)),(0,o.eW)((0,c.v_)(l.deployError),1)])):l.deployResult?((0,o.uX)(),(0,o.CE)("div",tt,[e[11]||(e[11]=(0,o.Lk)("i",{class:"bi bi-check-circle me-2"},null,-1)),(0,o.eW)((0,c.v_)(l.deployResult),1)])):((0,o.uX)(),(0,o.CE)("div",rt,e[12]||(e[12]=[(0,o.Lk)("i",{class:"bi bi-info-circle me-2"},null,-1),(0,o.eW)('在上方输入信息后点击"开始部署"按钮 ')])))])])])])])}t(906);const nt={name:"OllamaDeployView",data:function(){return{deployData:{model_path:"",model_name:""},deploying:!1,deployResult:null,deployError:null}},methods:{deployToOllama:function(){var a=this;this.deploying=!0,this.deployError=null,this.deployResult=null;var e=/^[a-zA-Z0-9_-]+$/;if(!e.test(this.deployData.model_name))return this.deployError="模型名称只能包含字母、数字、连字符和下划线",void(this.deploying=!1);fetch("/api/ollama/deploy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.deployData)}).then((function(a){if(!a.ok)throw new Error("部署请求失败");return a.json()})).then((function(e){if(!e.success)throw new Error(e.message||"部署请求失败");a.pollDeployStatus(e.task_id)}))["catch"]((function(e){a.deployError="部署失败: ".concat(e.message),a.deploying=!1}))},pollDeployStatus:function(a){var e=this,t=setInterval((function(){fetch("/api/ollama/status?task_id=".concat(a)).then((function(a){if(!a.ok)throw new Error("获取部署状态失败");return a.json()})).then((function(a){a.success&&("completed"===a.status?(clearInterval(t),e.deployResult='模型部署成功！使用 "ollama run '.concat(e.deployData.model_name,'" 即可使用您微调好的模型。'),e.deploying=!1):"failed"===a.status&&(clearInterval(t),e.deployError="部署失败: ".concat(a.message||"未知错误"),e.deploying=!1))}))["catch"]((function(a){clearInterval(t),e.deployError="获取部署状态失败: ".concat(a.message),e.deploying=!1}))}),3e3);setTimeout((function(){e.deploying&&(clearInterval(t),e.deployError="部署超时，请检查模型路径是否正确或Ollama是否已安装",e.deploying=!1)}),3e5)}}},lt=(0,b.A)(nt,[["render",ot],["__scopeId","data-v-168608a3"]]),it=lt,st={name:"App",components:{SideBar:h,TrainingView:se,InferenceView:qe,OllamaDeployView:it,ElianFactoryIntroView:je},data:function(){return{activePage:"training",pageComponents:{training:se,inference:qe,ollama:it,intro:je}}},computed:{currentComponent:function(){return this.pageComponents[this.activePage]}},methods:{changePage:function(a){this.activePage=a}}},ct=(0,b.A)(st,[["render",s]]),dt=ct;t(323);(0,r.Ef)(dt).mount("#app")}},e={};function t(r){var o=e[r];if(void 0!==o)return o.exports;var n=e[r]={exports:{}};return a[r].call(n.exports,n,n.exports,t),n.exports}t.m=a,(()=>{var a=[];t.O=(e,r,o,n)=>{if(!r){var l=1/0;for(d=0;d<a.length;d++){for(var[r,o,n]=a[d],i=!0,s=0;s<r.length;s++)(!1&n||l>=n)&&Object.keys(t.O).every((a=>t.O[a](r[s])))?r.splice(s--,1):(i=!1,n<l&&(l=n));if(i){a.splice(d--,1);var c=o();void 0!==c&&(e=c)}}return e}n=n||0;for(var d=a.length;d>0&&a[d-1][2]>n;d--)a[d]=a[d-1];a[d]=[r,o,n]}})(),(()=>{t.n=a=>{var e=a&&a.__esModule?()=>a["default"]:()=>a;return t.d(e,{a:e}),e}})(),(()=>{t.d=(a,e)=>{for(var r in e)t.o(e,r)&&!t.o(a,r)&&Object.defineProperty(a,r,{enumerable:!0,get:e[r]})}})(),(()=>{t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(a){if("object"===typeof window)return window}}()})(),(()=>{t.o=(a,e)=>Object.prototype.hasOwnProperty.call(a,e)})(),(()=>{var a={524:0};t.O.j=e=>0===a[e];var e=(e,r)=>{var o,n,[l,i,s]=r,c=0;if(l.some((e=>0!==a[e]))){for(o in i)t.o(i,o)&&(t.m[o]=i[o]);if(s)var d=s(t)}for(e&&e(r);c<l.length;c++)n=l[c],t.o(a,n)&&a[n]&&a[n][0](),a[n]=0;return t.O(d)},r=self["webpackChunkllm_trainer_ui"]=self["webpackChunkllm_trainer_ui"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var r=t.O(void 0,[504],(()=>t(6956)));r=t.O(r)})();